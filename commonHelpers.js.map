{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function createRequest(dataSearch, page) {\n    const params = new URLSearchParams({\n        key: \"43244654-6a0ffb606fc9a226d05679f88\",\n        q: dataSearch,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page,\n        per_page: 15\n    });\n    const {data} = await axios.get(`https://pixabay.com/api/?${params}`);\n    return data;\n}","\nexport function createGallery(arr) {\n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => \n            `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${largeImageURL}\" >\n                   <img\n                     class = \"gallery-image\"\n                     src = \"${webformatURL}\"\n                     alt = \"${tags}\"\n                     />\n                 </a>\n                 <div class = \"img-inform-wrapper\">\n                 <div class = \"img-inform\">\n                 <h2 class =\"img-title\">Likes</h2>\n                 <p class = \"img-text\">${likes}</p>\n                 </div>\n                  <div class = \"img-inform\">\n                 <h2 class =\"img-title\">Views</h2>\n                 <p class = \"img-text\">${views}</p>\n                 </div>\n                  <div class = \"img-inform\">\n                 <h2 class =\"img-title\">Comments</h2>\n                 <p class = \"img-text\">${comments}</p>\n                 </div>\n                  <div class = \"img-inform\">\n                 <h2 class =\"img-title\">Downloads</h2>\n                 <p class = \"img-text\">${downloads}</p>\n                 </div></div>\n            </li>`)\n        .join(\"\");\n}\n\nexport function showLoading(element) {\n    element.style.display = \"block\";\n}\n\nexport function hideLoading(element) {\n    element.style.display = \"none\";\n}\n","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { createRequest } from \"./js/pixabay-api\";\nimport { createGallery } from \"./js/render-functions\";\nimport { showLoading } from \"./js/render-functions\";\nimport { hideLoading } from \"./js/render-functions\";\n\nconst form = document.querySelector(\".search-form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loading-indicator\");\nconst loadBtn = document.querySelector(\".load-btn\");\n\nlet dataSearch = \"\";\nlet page = 1;\nlet allPages = 0;\nform.addEventListener(\"submit\", handleSubmit);\nloadBtn.addEventListener(\"click\", leadMore);\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    gallery.innerHTML = \"\";\n    hideLoading(loadBtn);\n    dataSearch = event.currentTarget.elements.data.value.trim();\n    if (dataSearch === \"\") {\n        return iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: \"topRight\"\n        });\n    };\n    showLoading(loader);\n    try {\n        page = 1;\n        const data = await createRequest(dataSearch, page);\n        if (data.hits.length === 0) {\n            hideLoading(loader);\n            return iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\"\n            })\n        }\n        form.reset();\n        gallery.innerHTML = createGallery(data.hits);\n        allPages = Math.ceil(data.total / 15);\n        if (page < allPages) {\n            showLoading(loadBtn);\n        }\n        \n        lightboxGallery.refresh();\n    } catch (error) {\n        iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: \"topRight\"\n        })\n    } finally {\n        hideLoading(loader);\n    }\n}\n\nasync function leadMore(event) {\n    page += 1;\n    hideLoading(loadBtn);\n    showLoading(loader);\n    try {\n        const data = await createRequest(dataSearch, page);\n        gallery.insertAdjacentHTML(\"beforeend\", createGallery(data.hits));\n        const { height } = gallery.firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n            top: height * 2,\n            behavior: \"smooth\",\n        });\n\n        if (page < allPages) {\n            showLoading(loadBtn);\n        }\n        lightboxGallery.refresh();\n        \n    } catch (error) {\n        iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\"\n                })\n    } finally {\n        hideLoading(loader);\n    }\n}\n\nlet lightboxGallery = new SimpleLightbox('.gallery a', {\n    captionsData: \"alt\",\n    captionsPosition: \"bottom\",\n    captionsDelay: 250\n});\n\n"],"names":["createRequest","dataSearch","page","params","data","axios","createGallery","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showLoading","element","hideLoading","form","gallery","loader","loadBtn","allPages","handleSubmit","leadMore","event","iziToast","lightboxGallery","height","SimpleLightbox"],"mappings":"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"}